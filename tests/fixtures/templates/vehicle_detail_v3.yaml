template_id: vehicle_detail_v3
version: 1
entity_type: vehicle
url_pattern: ".*/item/.*"
fields:
  - name: registration_number
    type: string
    selectors: ["dd"]
    required: true
    db_map:
      table: "vehicles"
      column: "registration_number"
  - name: model_year
    type: number
    selectors: ["[data-spec=modelYear]"]
    transforms:
      - name: regex_extract
        args:
          pattern: "(\\d{4})"
      - name: to_int
    db_map:
      table: "vehicles"
      column: "model_year"
  - name: co2_wltp
    type: number
    selectors: ["#wltp-co2"]
    transforms:
      - name: regex_extract
        args:
          pattern: "([\\d,]+)"
      - name: to_decimal
    db_map:
      table: "vehicle_technical_specs"
      column: "wltp_co2_g_km"